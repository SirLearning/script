#! /bin/bash

# parameters
## $1: bamlist number
## $2: bam file path

mapfile -t bams < plist"$1".txt
num=${#bams[@]}
echo "bams loaded: ${#bams[@]}"
for (( i = 0; i < num; i++ ));
do
  if [ -f "$2"/"${bams[i]}"_deduped.bam ]; then
    echo "extract subset of: ${bams[i]}.bam"
    samtools view -b "$2"/"${bams[i]}"_deduped.bam 1:1-1000000 -o "${bams[i]}".sub.bam
  fi
done
