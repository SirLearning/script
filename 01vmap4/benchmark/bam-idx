#! /bin/bash

# parameters
## $1: bamlist number

mapfile -t bams < plist"$1".txt
num=${#bams[@]}
echo "bams loaded: ${#bams[@]}"
for (( i = 0; i < num; i++ ));
do
  if [ -f "${bams[i]}".sub.bam ]; then
    echo "indexing file: ${bams[i]}.sub.bam"
    samtools index -@ 20 "${bams[i]}".sub.bam
  fi
done

