// Nextflow configuration for FastCall3 Performance Analysis

// Process configuration
process {
    executor = 'local'

    // Default resource allocation
    cpus = 4
    memory = '16 GB'

    // Specific process configurations
    withName: 'prepareTaxaBamMap' {
        cpus = 4
        memory = '16 GB'
    }

    withName: 'runPerfTest' {
        cpus = 2
        memory = '8 GB'
        time = '4h'
    }

    withName: 'analyzeResults' {
        cpus = 4
        memory = '8 GB'
    }
}

// Executor configuration
executor {
    name = 'local'
    cpus = 128      // Update to actual system CPUs
    memory = '1280 GB' // Update to actual system memory
    queueSize = 20   // Allow more parallel tasks
}

// Report configuration - enabled for performance analysis
report {
    enabled = true
    file = 'perf_output/pipeline_report.html'
}

timeline {
    enabled = true
    file = 'perf_output/execution_timeline.html'
}

trace {
    enabled = true
    file = 'perf_output/execution_trace.txt'
    overwrite = true
}

dag {
    enabled = true
    file = 'perf_output/pipeline_dag.svg'
}

// Work directory cleanup
cleanup = false  // Keep work directory for debugging

// Resume configuration
resume = true

// Resource monitoring
monitor {
    enabled = true
    interval = '5min'
}