/*
 * -------------------------------------------------
 *  Nextflow config for Association/genotype
 * -------------------------------------------------
 * Default parameters and resources for the genotype
 * sub-pipeline (FILTER_VCF, KINSHIP_ANALYSIS,
 * POPULATION_STRUCTURE, GENOTYPE_STATS).
 */

params {
  // --- Required Parameters ---
  // working directories
  home_dir = null
  src_dir = null
  user_dir = null
  output_dir = null
  // working identifiers
  mod = null
  job = null

  // --- Optional Parameters ---
  // output sub-directories
  process_dir = null
  filter_dir = null
  assess_dir = null
  stats_dir = null
  kinship_dir = null
  ps_dir = null
  
  // --- Pipeline Control ---
  // software parameters

  // subsampling rate for testing
  thin_rate = 0.001

  // analysis parameters
  pc_num = 10

  // job chromosome filter
  chr = null

  // Show help and exit
  help = false

  // default parameters
  // reference genome
  // --- VCF Filter Parameters ---
  // standard filter parameters (std)
  maf = 0.05
  mac = 2
  min_alleles = 2
  max_alleles = 2
  max_missing = 0.05
  // additional parameters can be added here
  qual = 30
  hwe_pval = 1e-6

  // --- Colors ---
  c_reset  = "\033[0m";
  c_dim    = "\033[2m";
  c_black  = "\033[0;30m";
  c_green  = "\033[0;32m";
  c_yellow = "\033[0;33m";
  c_blue   = "\033[0;34m";
  c_purple = "\033[0;35m";
  c_cyan   = "\033[0;36m";
  c_white  = "\033[0;37m";
}

process {
  // Global defaults
  cpus = 32
  memory = '64 GB'

  withName: vcf_to_plink {
    cpus = 32
    memory = 64.GB
  }
}

executor {
  name = 'local'
  cpus = 128
  memory = 1536.GB
}

trace {
  enabled = true
  file = 'pipeline_info/trace.txt'
  fields = 'task_id,hash,name,tag,status,exit,cpus,memory,attempt,duration,realtime,%cpu,%mem,rss,peak_rss,vmem,peak_vmem,read_bytes,write_bytes,submit,start,complete'
  overwrite = true
}

resume = true
